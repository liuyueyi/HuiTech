# 2. SpringMVC返回图片二进制流

后端提供服务，通常返回的json串，但是某些场景下可能需要直接返回二进制流，如一个图片编辑接口，希望直接将图片流返回给前端，此时可以怎么处理？


## I. 返回二进制图片

主要借助的是 HttpServletResponse这个对象，实现case如下

```java
@RequestMapping(value = {"/img/render"}, method = {RequestMethod.GET, RequestMethod.POST, RequestMethod.OPTIONS})
@CrossOrigin(origins = "*")
@ResponseBody
public String execute(HttpServletRequest httpServletRequest,
             HttpServletResponse httpServletResponse) {
    // img为图片的二进制流
    byte[] img = xxx;
    httpServletResponse.setContentType("image/png");
    OutputStream os = httpServletResponse.getOutputStream();
    os.write(img);
    os.flush();
    os.close();
    return "success";
}
```


注意事项

- 注意ContentType定义了图片类型
- 将二进制写入 `httpServletResponse#getOutputStream`
- 写完之后，`flush()`, `close()`请务必执行一次

## II. 其他

### 声明

尽信书则不如，已上内容，纯属一家之言，因本人能力一般，见解不全，如有问题，欢迎批评指正

### 扫描关注，java分享

![QrCode](https://s10.mogucdn.com/mlcdn/c45406/180103_61hi8f7kldkl202fked3k2g0ial1e_640x340.jpg)

